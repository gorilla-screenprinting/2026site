<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gorilla Quoter</title>

  <!-- Load shared site tokens/fonts first, then embed-specific styles -->
  <link rel="stylesheet" href="../../styles.css">
  <link rel="stylesheet" href="style.css">
  <script src="app.js" defer></script>
</head>

<body>
  <div class="container">
    <div class="quote-shell">

      <div class="card">
        <div class="card-title-row">
          <h1 class="fit-heading heading-accent">Get A Basic Quote</h1>
          <button type="button" id="banana-toggle" aria-pressed="false" aria-label="Toggle banana bounce">üçå</button>
        </div>

        <form id="myForm"
          action="https://script.google.com/macros/s/AKfycbzJNzT0P59sXflEMxhtjN4vqgV3FbIgLxtHomj2UO4rmCUp4ziUjAUR0QoNiCJtPoZU/exec"
          method="post">

          <!-- honeypot -->
          <div style="display:none;">
            <label>Leave this field blank:
              <input type="text" name="companyWebsite" autocomplete="off" tabindex="-1">
            </label>
          </div>
          <input type="hidden" name="formStart" id="formStart" value="">

          <!-- customer info -->
          <label>Your name:
            <input type="text" name="customerName" required>
          </label>

          <label>Your email:
            <input type="email" name="customerEmail" required>
          </label>

          <label>Your deadline &amp; must-haves:
            <input type="text" name="notes" required>
          </label>

          <!-- dynamic products -->
          <div id="orderLines"></div>

          <div class="button-row">
            <button class="btn" type="button" id="addProduct">Add New Product</button>
            <button class="btn" type="submit">Submit Quote Request</button>
          </div>

        </form>
      </div>

      <div id="quote-thanks" class="thankyou-card" hidden>
        <img class="thankyou-img" src="../../assets/2025 SUMMER.png" alt="Gorilla Means Quality banner">
        <div class="thankyou-copy">
          <h2>Quote Request Received!</h2>
          <p>We'll reach out soon.</p>
          <p>Have another project you need quoted? Tap refresh below.</p>
        </div>
        <button type="button" class="btn" id="quote-refresh">Refresh!</button>
      </div>
    </div>
  </div>

  <div id="dvd-emoji-container" aria-hidden="true"></div>
  <iframe id="quote-submit-target" name="quote-submit-target" title="Quote submission target" hidden></iframe>

  <script>
    const postHeight = () => {
      const container = document.querySelector('.container');
      const measured = container ? Math.ceil(container.scrollHeight) : 0;
      const height = Math.max(0, measured);
      window.parent.postMessage({ type: 'embedded-height', height }, '*');
    };
    window.addEventListener('load', () => requestAnimationFrame(postHeight));
    window.addEventListener('resize', () => requestAnimationFrame(postHeight));
    const observer = new MutationObserver(() => {
      requestAnimationFrame(postHeight);
    });
    observer.observe(document.body, { childList: true, subtree: true, attributes: true });
    window.addEventListener('message', (event) => {
      const { type } = event.data || {};
      if (type === 'request-height') {
        postHeight();
      }
    });
    // Report every animation frame while the card is on screen to keep the parent in sync
    const tick = () => {
      requestAnimationFrame(() => postHeight());
      requestAnimationFrame(tick);
    };
    requestAnimationFrame(tick);
  </script>
</body>

</html>
